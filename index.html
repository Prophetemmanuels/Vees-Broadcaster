<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vees Thrift Broadcaster</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#f6c1d9">

<style>
body{font-family:Arial;margin:0;padding:15px;background:#fff}
h2{text-align:center}
input,button{width:100%;padding:12px;margin:6px 0;border-radius:8px;border:1px solid #ccc;font-size:16px}
button{background:#25D366;color:#fff;border:none;font-weight:bold}
.product{border:1px solid #ddd;padding:8px;margin:8px 0;border-radius:10px}
img{max-width:100%;border-radius:8px;margin-top:5px}
</style>
</head>
<body>

<h2>Vees Thrift Product Sender</h2>

<input type="text" id="pname" placeholder="Product Name">
<input type="text" id="psize" placeholder="Size">
<input type="number" id="pprice" placeholder="Price">

<!-- IMAGE INPUTS -->
<input type="file" id="cameraInput" accept="image/*" capture="environment" hidden>
<input type="file" id="galleryInput" accept="image/*" hidden>

<button type="button" onclick="openCamera()">ðŸ“· Take Photo</button>
<button type="button" onclick="openGallery()">ðŸ–¼ Upload from Gallery</button>

<img id="preview" style="display:none">

<button onclick="addProduct()">âž• Add Product</button>

<div id="productList"></div>

<button onclick="sendToWhatsApp()">ðŸš€ Send Products to WhatsApp Group</button>

<script>
let products = [];
let selectedImage = "";

function openCamera(){ cameraInput.click(); }
function openGallery(){ galleryInput.click(); }

cameraInput.onchange = handleImage;
galleryInput.onchange = handleImage;

function handleImage(e){
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = function(ev){
    selectedImage = ev.target.result;
    preview.src = selectedImage;
    preview.style.display = "block";
  }
  reader.readAsDataURL(file);
}

function addProduct(){
  const name = pname.value;
  const size = psize.value;
  const price = pprice.value;

  if(!name || !size || !price || !selectedImage){
    alert("Fill all fields & image");
    return;
  }

  const now = new Date();
  const product = {
    name,size,price,
    image:selectedImage,
    date:now.toLocaleDateString(),
    time:now.toLocaleTimeString()
  };

  products.push(product);
  displayProducts();

  pname.value=""; psize.value=""; pprice.value="";
  preview.style.display="none";
  selectedImage="";
}

function displayProducts(){
  productList.innerHTML="";
  products.forEach(p=>{
    productList.innerHTML+=`
      <div class="product">
        <b>${p.name}</b><br>
        Size: ${p.size}<br>
        Price: ${p.price}<br>
        Date: ${p.date} ${p.time}
        <img src="${p.image}">
      </div>`;
  });
}

function sendToWhatsApp(){
  let text="*Vees Thrift Products*%0A%0A";
  products.forEach((p,i)=>{
    text+=`${i+1}. ${p.name}%0ASize: ${p.size}%0APrice: ${p.price}%0ADate: ${p.date} ${p.time}%0A%0A`;
  });

  window.open(`https://wa.me/?text=${text}`,"_blank");
}

// SERVICE WORKER
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('service-worker.js');
}
</script>

</body>
</html>
